#!/bin/bash

## DEBUG
DEBUG=${DEBUG:-false}

## CORE
INVOICEPLANE_CONFIGS_DIR=${INVOICEPLANE_CONFIGS_DIR:-$INVOICEPLANE_DATA_DIR/configs}
INVOICEPLANE_UPLOADS_DIR=${INVOICEPLANE_UPLOADS_DIR:-$INVOICEPLANE_DATA_DIR/uploads}
INVOICEPLANE_BACKUPS_DIR=${INVOICEPLANE_BACKUPS_DIR:-$INVOICEPLANE_DATA_DIR/backups}
INVOICEPLANE_DOCUMENT_TEMPLATES=${INVOICEPLANE_DOCUMENT_TEMPLATES:-$INVOICEPLANE_DATA_DIR/templates}

INVOICEPLANE_URL=${INVOICEPLANE_URL:-$PHP_FPM_ENV_INVOICEPLANE_URL}
INVOICEPLANE_URL=${INVOICEPLANE_URL:-http://localhost}

# credits: http://stackoverflow.com/a/2506635/4799938
INVOICEPLANE_FQDN=$(sed -e "s/\([^/]*\)\:\/\/\([^@]*@\)\?\([^:/]*\).*/\3/" <<< ${INVOICEPLANE_URL})
if [[ $(sed -e "s/\([^/]*\)\:\/\/\([^@]*@\)\?\([^:/]*\).*/\1/" <<< ${INVOICEPLANE_URL}) == https ]]; then
  INVOICEPLANE_HTTPS=${INVOICEPLANE_HTTPS:-on}
else
  INVOICEPLANE_HTTPS=${INVOICEPLANE_HTTPS:-off}
fi

INVOICEPLANE_TIMEZONE=${INVOICE_PLANE_TIMEZONE:-} # backward compatibility
INVOICEPLANE_TIMEZONE=${INVOICEPLANE_TIMEZONE:-$TZ}
INVOICEPLANE_TIMEZONE=${INVOICEPLANE_TIMEZONE:-UTC}

## DATABASE
DB_HOST=${DB_HOST:-}
DB_PORT=${DB_PORT:-}
DB_NAME=${DB_NAME:-}
DB_USER=${DB_USER:-}
DB_PASS=${DB_PASS:-}

## PHP_FPM
INVOICEPLANE_PHP_FPM_HOST=${INVOICEPLANE_PHP_FPM_HOST:-}
INVOICEPLANE_PHP_FPM_PORT=${INVOICEPLANE_PHP_FPM_PORT:-}

## BACKUPS
INVOICEPLANE_BACKUPS_EXPIRY=${INVOICEPLANE_BACKUPS_EXPIRY:-0}
